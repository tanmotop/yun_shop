(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5a1b"],{JNhG:function(t,e,i){},NLZe:function(t,e,i){},OzGj:function(t,e,i){"use strict";var a=i("JNhG");i.n(a).a},Vebj:function(t,e,i){"use strict";var a=i("NLZe");i.n(a).a},"W+UG":function(t,e,i){"use strict";i.r(e);var a={name:"website-setting",components:{Tinymce:i("glbJ").a},data:function(){return{ImgList:[],submit_loading:!1,uploadImg:"",chooseImg:"",radio1:"不限",radio2:"不限",activeName2:"first",centerDialogVisible:!1,form:{name:"",site_logo:"",title_icon:"",advertisement:"",information:""},pageSize:0,current_page:0,total:0,rules:{}}},created:function(){this.getData(),this.currentChange(1),window.addEventListener("beforeunload",function(t){window.onbeforeunload=null})},destroyed:function(){},methods:{chooseTheImg:function(t){this.form[this.chooseImg]=t,this.centerDialogVisible=!1},chooseYear:function(t){this.currentChange(1)},chooseMonth:function(t){this.currentChange(1)},openUpload:function(t){this.chooseImg=t,this.uploadImg="",this.centerDialogVisible=!0},sureImg:function(){this.form[this.chooseImg]=this.uploadImg,this.centerDialogVisible=!1},currentChange:function(t){var e=this;$http.get("/admin/all/list",{page:t,year:this.radio1,month:this.radio2},"加载中").then(function(t){1===t.result?(e.total=t.data.total,e.ImgList=t.data.data,e.current_page=t.data.current_page,e.pageSize=t.data.per_page):(e.list=t.data,e.$message.error("接口请求错误"))}).catch(function(t){console.error(t)})},uploadSuccess:function(t,e){1===t.result?t.data.success?(this.uploadImg=t.data.success,this.$message.success("上传成功！")):this.$message.error(t.data.fail):this.$message.error(t.msg),this.submit_loading=!1},beforeUpload:function(t){this.submit_loading=!0;var e=t.size/1024/1024<4;return e||(this.$message.error("上传图片大小不能超过 4MB!"),this.submit_loading=!1),e},clearImg:function(t){this.form[t]=""},deleteImg:function(t){var e=this;$http.get("/admin/all/delImg",{id:t}," ").then(function(t){1===t.result?(e.$message.success("系统删除成功"),e.currentChange(1)):e.$message.error("删除出错")}).catch(function(t){console.error(t)})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;$http.post("/admin/system/site",{setdata:e.form},"保存中").then(function(t){1===t.result&&(e.$message.success("保存成功！"),window.location.reload())}).catch(function(){e.$message.error("保存失败！")})})},getData:function(){var t=this;$http.post("/admin/system/site",{},"加载中").then(function(e){1==e.result&&(t.form=e.data)}).catch(function(){console.log("获取数据失败！")})}}},o=(i("Vebj"),i("ZrdR")),s=Object(o.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right"},[t._m(0),t._v(" "),i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"15%"}},[i("el-form-item",{attrs:{label:"站点名称",prop:"name"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入站点名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"平台LOGO",prop:"site_logo"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请上传平台LOGO",disabled:""},model:{value:t.form.site_logo,callback:function(e){t.$set(t.form,"site_logo",e)},expression:"form.site_logo"}}),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.openUpload("site_logo")}}},[t._v("点击上传\n      ")]),t._v(" "),i("div",{staticClass:"avatar-uploader-box"},[t.form.site_logo?i("img",{staticClass:"avatar",attrs:{src:t.form.site_logo}}):t._e(),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.form.site_logo,expression:"form.site_logo"}],staticClass:"el-icon-circle-close",attrs:{title:"点击清除图片"},on:{click:function(e){t.clearImg("site_logo")}}})])],1),t._v(" "),i("el-form-item",{attrs:{label:"favorite icon",prop:"title_icon"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请上传favorite icon",disabled:""},model:{value:t.form.title_icon,callback:function(e){t.$set(t.form,"title_icon",e)},expression:"form.title_icon"}}),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.openUpload("title_icon")}}},[t._v("点击上传\n      ")]),t._v(" "),i("div",{staticClass:"avatar-uploader-box"},[t.form.title_icon?i("img",{staticClass:"avatar",attrs:{src:t.form.title_icon}}):t._e(),t._v(" "),i("div",{staticClass:"el-upload-tip",attrs:{slot:"tip"},slot:"tip"},[t._v("(显示在浏览器标题的图标)")]),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.form.title_icon,expression:"form.title_icon"}],staticClass:"el-icon-circle-close",attrs:{title:"点击清除图片"},on:{click:function(e){t.clearImg("title_icon")}}})])],1),t._v(" "),i("el-form-item",{attrs:{label:"登录页广告",prop:"advertisement"}},[i("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请上传登录页广告",disabled:""},model:{value:t.form.advertisement,callback:function(e){t.$set(t.form,"advertisement",e)},expression:"form.advertisement"}}),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.openUpload("advertisement")}}},[t._v("点击上传\n      ")]),t._v(" "),i("div",{staticClass:"avatar-uploader-box"},[t.form.advertisement?i("img",{staticClass:"avatar",attrs:{src:t.form.advertisement}}):t._e(),t._v(" "),i("div",{staticClass:"el-upload-tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n          (请上传750*365px方形图片)\n        ")]),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:t.form.advertisement,expression:"form.advertisement"}],staticClass:"el-icon-circle-close",attrs:{title:"点击清除图片"},on:{click:function(e){t.clearImg("advertisement")}}})])],1),t._v(" "),i("el-form-item",{attrs:{label:"底部信息",prop:"information"}},[i("div",{staticStyle:{width:"70%"}},[i("tinymce",{attrs:{height:300},model:{value:t.form.information,callback:function(e){t.$set(t.form,"information",e)},expression:"form.information"}})],1)]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"success"},on:{click:function(e){t.submitForm("form")}}},[t._v("\n        保存设置\n      ")])],1)],1),t._v(" "),i("el-dialog",{attrs:{visible:t.centerDialogVisible,width:"65%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[i("el-tabs",{attrs:{type:"card"},model:{value:t.activeName2,callback:function(e){t.activeName2=e},expression:"activeName2"}},[i("el-tab-pane",{attrs:{label:"上传图片",name:"first"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.submit_loading,expression:"submit_loading"}],staticClass:"submit_Img",staticStyle:{"text-align":"center"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/admin/all/upload",accept:"image/*","show-file-list":!1,"on-success":t.uploadSuccess,"before-upload":t.beforeUpload}},[t.uploadImg?i("div",{staticClass:"avatar_box"},[i("img",{staticClass:"avatar",attrs:{src:t.uploadImg}})]):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),t._v(" "),i("el-tab-pane",{attrs:{label:"提取网络图片",name:"second"}},[i("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入网络图片地址"},model:{value:t.uploadImg,callback:function(e){t.uploadImg=e},expression:"uploadImg"}})],1),t._v(" "),i("el-tab-pane",{attrs:{label:"浏览图片",name:"third"}},[i("div",[i("el-radio-group",{attrs:{size:"medium"},on:{change:t.chooseYear},model:{value:t.radio1,callback:function(e){t.radio1=e},expression:"radio1"}},[i("el-radio-button",{attrs:{label:"不限"}}),t._v(" "),i("el-radio-button",{attrs:{label:"2019"}},[t._v("2019年")]),t._v(" "),i("el-radio-button",{attrs:{label:"2018"}},[t._v("2018年")]),t._v(" "),i("el-radio-button",{attrs:{label:"2017"}},[t._v("2017年")]),t._v(" "),i("el-radio-button",{attrs:{label:"2016"}},[t._v("2016年")])],1)],1),t._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},[i("el-radio-group",{attrs:{size:"small"},on:{change:t.chooseMonth},model:{value:t.radio2,callback:function(e){t.radio2=e},expression:"radio2"}},[i("el-radio-button",{attrs:{label:"不限"}}),t._v(" "),i("el-radio-button",{attrs:{label:"1"}},[t._v("1月")]),t._v(" "),i("el-radio-button",{attrs:{label:"2"}},[t._v("2月")]),t._v(" "),i("el-radio-button",{attrs:{label:"3"}},[t._v("3月")]),t._v(" "),i("el-radio-button",{attrs:{label:"4"}},[t._v("4月")]),t._v(" "),i("el-radio-button",{attrs:{label:"5"}},[t._v("5月")]),t._v(" "),i("el-radio-button",{attrs:{label:"6"}},[t._v("6月")]),t._v(" "),i("el-radio-button",{attrs:{label:"7"}},[t._v("7月")]),t._v(" "),i("el-radio-button",{attrs:{label:"8"}},[t._v("8月")]),t._v(" "),i("el-radio-button",{attrs:{label:"9"}},[t._v("9月")]),t._v(" "),i("el-radio-button",{attrs:{label:"10"}},[t._v("10月")]),t._v(" "),i("el-radio-button",{attrs:{label:"11"}},[t._v("11月")]),t._v(" "),i("el-radio-button",{attrs:{label:"12"}},[t._v("12月")])],1)],1),t._v(" "),i("div",{staticClass:"imgList",attrs:{id:"upload-img"}},t._l(t.ImgList,function(e){return i("div",{staticClass:"avatar-uploader-box"},[i("img",{staticClass:"avatar",attrs:{src:e.url},on:{click:function(i){t.chooseTheImg(e.url)}}}),t._v(" "),i("i",{staticClass:"el-icon-circle-close",attrs:{title:"点击清除图片"},on:{click:function(i){t.deleteImg(e.id)}}})])})),t._v(" "),i("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{background:"","page-size":t.pageSize,"current-page":t.current_page,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.current_page=e}}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.sureImg}},[t._v("确 定 ")])],1)],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"right-head"},[e("div",{staticClass:"right-head-con1"},[this._v("站点设置")])])}],!1,null,null,null);s.options.__file="index.vue";e.default=s.exports},ZQDA:function(t,e,i){},glbJ:function(t,e,i){"use strict";var a=i("Asgo"),o=i.n(a),s=i("EPZ6"),n=i.n(s),l={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return n()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=n()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var i=e.uid,a=n()(this.listObj),o=0,s=a.length;o<s;o++)if(this.listObj[a[o]].uid===i)return this.listObj[a[o]].url=t.files.file,void(this.listObj[a[o]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=n()(this.listObj),a=0,o=i.length;a<o;a++)if(this.listObj[i[a]].uid===e)return void delete this.listObj[i[a]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,a=t.uid;return this.listObj[a]={},new o.a(function(o,s){var n=new Image;n.src=i.createObjectURL(t),n.onload=function(){e.listObj[a]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},o(!0)})}}},r=(i("wn0B"),i("ZrdR")),c=Object(r.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,"39480e6e",null);c.options.__file="editorImage.vue";var u=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],d=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],m={name:"Tinymce",components:{editorImage:c.exports},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})},language:function(){var t=this;this.destroyTinymce(),this.$nextTick(function(){return t.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({language:this.language,selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:d,menubar:this.menubar,plugins:u,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",i.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}}},h=(i("OzGj"),Object(r.a)(m,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},[],!1,null,"4b42c7ad",null));h.options.__file="index.vue";e.a=h.exports},wn0B:function(t,e,i){"use strict";var a=i("ZQDA");i.n(a).a}}]);